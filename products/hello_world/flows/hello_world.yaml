# ==============================
# Flow: hello_world
# ==============================
# Golden path:
#   1) Call echo tool
#   2) Pause for human approval
#   3) Agent summarizes outcome

name: "hello_world"
version: "1.0.0"
description: "Echo -> HITL approval -> agent summary"
autonomy_level: "suggest_only"

steps:
  - id: "echo"
    type: "tool"
    backend: "local"
    tool: "echo_tool"
    params:
      message: "{{payload.keyword}}"
    retry:
      max_attempts: 2
      backoff_seconds: 1
      retry_on: ["TEMPORARY", "timeout"]

  - id: "approval"
    type: "human_approval"
    title: "Approve the echoed message"
    message: "Please approve or reject the echoed output before continuing."
    # Optional: UI can render these fields generically
    form:
      fields:
        - name: "approved"
          type: "boolean"
          required: true
        - name: "notes"
          type: "string"
          required: false

  - id: "summary"
    type: "agent"
    backend: "local"
    agent: "simple_agent"
    params:
      template: "Summarize what happened and include whether it was approved."
